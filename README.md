<p align="center">
    <img width="605" src="https://img.shields.io/badge/blameitonyourisp-13-inactive?style=for-the-badge&labelColor=BAC99C&color=779966&logo=data:image/png;base64,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">
</p>



# Lightweight Commits

An opinionated standard for writing git commit messages, focused mainly on consistency and the ability to automatically generate changelog release notes/prompts  based on strictly formatted commits. This repository is hosted on [github](https://github.com), if you're already reading this there, then great! Otherwise browse the repository [here](https://github.com/blameitonyourisp/lightweight-commits).

![](https://img.shields.io/github/license/blameitonyourisp/lightweight-commits?style=for-the-badge&labelColor=0b0e0c&color=779966) ![](https://img.shields.io/github/v/tag/blameitonyourisp/lightweight-commits?style=for-the-badge&labelColor=0b0e0c&color=779966) 

### Table of Contents

- [Summary](#summary)
- [Motivation](#motivation)
- [Format](#format)
  - [Title](#title)
  - [Body](#body)
  - [Footer](#footer)
- [Title Nouns](#title-nouns)
- [Semver Flags](#semver-flags)
- [Summary Verbs](#summary-verbs)
- [Examples](#examples)
- [Template](#template)
- [Changelog](#changelog)
- [Roadmap](#roadmap)
- [License](#license)

## Summary

This document proposes a lightweight and opinionated standard for writing git commit messages called simply the lightweight commit format. The lightweight commit format is heavily inspired and influenced by the [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0), and by the [keep a changelog](https://keepachangelog.com/en/1.1.0) project. Note that the lightweight commit format has no strict direction with respect to the size of a commit, however for best results it is advised that developers keep their commits as small as possible, preferably adopting [atomic commits](https://en.wikipedia.org/wiki/Atomic_commit) wherever possible. In this manner, commits will be concerned with only one "thing", and therefore concise commit messages will be easier to write.

## Motivation

The main motivation behind creating this standard for writing git commits is a personal drive to standardise the way I write git commits in my own projects. Please see the following list of goals in writing this standard:

1. Reduce unnecessary characters in the title of the git commit, maximising the space available for the summary [^1]
2. Reduce potential ambiguity on the usage of [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0) nouns [^2]
3. Reduce overlap between [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0) nouns, git commit summary lead imperative verbs, and changelog sections suggested by the [keep a changelog](https://keepachangelog.com/en/1.1.0) project [^3]
4. Increase clarity with respect to the impact a commit will have on the [semver](https://semver.org/) version number of a package 
5. Increase git log utility in automatically generating prompts for package changelogs upon release of a new version
6. Increase visual uniformity across git commit titles so that they can be scanned more easily when they are logged

[^1]: Given that the title is limited to 50 characters, ideally we should spend as few characters as possible on writing meta data about the commit into our title. For instance the scope of the commit is largely superfluous, as it can either be seen in the path of the git log, or written in the [git trailers](https://git-scm.com/docs/git-interpret-trailers), and is therefore a waste of characters.
[^2]: Some of the [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0) standard nouns have ambiguous or different usages across repositories. For example, the `feat` (feature) noun is described by the documentation as being used for new features leading to ambiguity with respect to what noun should be used for minor *modifications* to features; should it be a feature change even though it is not strictly an entirely new feature, or should it be something else, and if so what should it be given that no other noun obviously fits? See [here](https://stackoverflow.com/questions/64290635/how-to-classify-ui-change-according-to-the-conventional-commits-specification) for an example of a discussion of this topic. See [here](https://stackoverflow.com/questions/48075169/semantic-commit-type-when-remove-something) for similar queries regarding the removal of a feature.
[^3]: Some of the [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0) standard nouns imply the imperative mood summary verb that will be used, causing a repetition of information in the title which is inefficient for given the character limit of the title. For example, the `fix` (fix) noun will nearly always imply the verb "Fix" at the start of the commit summary in order to have a standalone commit summary that makes sense: `fix: Fix this bug` vs `fix: This bug` (in the first example we see duplicate information in the commit title, and in the second sense the commit summary does not make any sense as a standalone sentence).

## Format

With respect to general formatting, the commit title should have a maximum length of 50 characters, the body of the commit should be wrapped at 72 characters, references may overflow this limit if the link is longer, and each remaining line of the footer should have a maximum length of 72. See [this gist](https://gist.github.com/robertpainsi/b632364184e70900af4ab688decf6f53) for some discussion on standard formatting of git commits. See below for further details on the specific formats of each section of the commit.

### Title

`<noun-abbr><semver-flag><whitespace><summary>`

The title must have a maximum length of 50 characters, and should have the format shown in the code block immediately above. Please see below for details on each component:

1. `<noun-abbr>` - Three letter noun abbreviation describing the *type* of the *object* of a commit ([see here](#title-nouns))
2. `<semver-flag>` - Single character flag describing the impact a commit will have on the [semver](https://semver.org/) version number of a package ([see here](#semver-flags))
3. `<whitespace>` - Single space separating the summary
4. `<summary>` - Summary of commit in imperative mood, starting in uppercase, not ending with a ".", and leading with a verb describing the *type* of *changes* a commit makes. The summary should make sense as standalone sentence ([see here](#summary-verbs))

### Body

The body must be separated from the title by *one* (1) blank line. The body must be wrapped at 72 characters, and should be formed of named sections taking the following format:

1. Each named section must start with `<SECTION_NAME>: ` (ALL_CAPS_NAME-colon-space) *inline* with the first paragraph of that section
2. Each section must be separated from the next by a single blank line
3. Each section may itself be made up of multiple paragraphs, and may contain the following simple, human-readable markup [^4] (only four main markup features are used, all taken from standard [markdown syntax](https://www.markdownguide.org/basic-syntax), and comprising a minimum set of features required for writing succinct commits):
	1. Paragraphs separated by single blank lines
	2. Markdown style italic emphasis using single asterisks around a word/phrase to highlight it [^5]
	3. Markdown style lists nested to any required depth (starting with no padding)
		2. The ordered lists deliminator `<number>. ` (number-dot-space)
		3. The unordered list deliminator is `- ` (dash-space)
		4. List items spanning more than one line should have subsequent lines space-aligned with the start of the item text (*not* the list deliminator) of the line above
		5. List item text should start with a capital letter, but not end with a "."
	4. Markdown style references using caret notation
		1. Any link will be inserted using markdown references in order to prevent awkward line wrapping and/or the body of the commit having lines longer than 72 characters where long links are required
		2. Markdown references may also be used to provide additional text information/explanation which would otherwise clutter the body of the commit or adversely affect readability 
		3. To insert a reference in the body of the commit, use `[^<ref-name>]` (bracket-caret-name-bracket) inline with the text where the link/explanation would be placed
		4. To provide the footer reference for a given number, use `[^<ref-name>]: <reference>` (bracket-caret-name-bracket-colon-space-link) in the footer section ([see here](#footer))
		5. Use sequential numbers for the default `<ref-name>` (reference name), or alternatively use *unique* custom strings which identify/briefly describe the reference (do *not* use "see here" or other generic strings, as these will not be uniquely identifiable in the footer)

The body should contain some or all of the following named sections, describing changes in imperative mood prose consistent with the commit title (the named sections included in a given commit body should also follow the order listed below):

1. `WHAT` - Details of change(s) made in this commit
	1. Summarise changes in an expanded manner with respect to the title
	2. Compare new functionality with old functionality, especially where breaking changes have occurred
2. `WHY` - Motivations behind these changes and why they are required
3. `MIGRATION` - Provide migration notes for any breaking changes, these will later inform the update instructions written in the changelog
4. `OTHER` - Provide any other relevant details that do not fall under the above categories

The body should *not* explain the "how?" of the commit; this should either be self evident from the code, or should be reserved for source code comments or custom documentation.

[^4]: All of the markup which is suggested for use in the body of git commits is based on markdown, however it is strictly limited to those elements which are clearly human readable considering that git commits are only ever rendered as text when they are viewed, the commit body wraps at 72 characters, and lines in the commit message starting `#` are ignored. These considerations eliminate markup such as tables (which would likely be far too wide and unreadable), horizontal rules (which although readable will produce a lot of visual clutter in the git log), any markdown heading (since the line will be ignored by git), and most others. In any case, markup in a git commit should be limited as far as possible to ensure readability and simplicity, and any commit message that requires complicated markup should perhaps be split into multiple commits, or indicate that an update to other documentation is required.
[^5]: Note that consistent with maintaining simplicity and reducing visual clutter, markdown emphasis in the git commit body is limited to *only* single asterisk italic emphasis. Given that the git log will render all markup strictly as text, double asterisks for bold text will not be easily discernible from single asterisks for italic emphasis.

### Footer

The footer must be separated from the body of the commit by *one* (1) blank line. The footer should take the following format (note that where both footer sections are used, the [git trailers](https://git-scm.com/docs/git-interpret-trailers) *must* come second):

1. Optional reference section
	1. Each reference may either be a link reference or a text reference which expands on/explains a concept in the commit body
	2. Each reference must start on a new line, but must *not* be separated from the reference above by a blank line
	3. Text references must form *one* (1) paragraph formed of standard sentence(s), wrap at 72 characters, and end with a "."
	4. Link references must occupy *one* (1) line only, and may be longer than the 72 character limit if a long link is required
	5. For each reference of either type, follow the format `[^<ref-name>]: <reference>` (bracket-caret-name-bracket-colon-space-link)
	6. The default `<ref-name>` (reference name) is a set of sequential numbers
2. Blank line if both references *and* [git trailers](https://git-scm.com/docs/git-interpret-trailers) are used ([git trailers](https://git-scm.com/docs/git-interpret-trailers) must be separated from references by *one* (1) blank line for correct parsing)
3. Optional [git trailers](https://git-scm.com/docs/git-interpret-trailers) section (see below for details)

The end of the footer must be comprised only of a series of [git trailers](https://git-scm.com/docs/git-interpret-trailers), which must each be a maximum of 72 characters. Note that [git trailers](https://git-scm.com/docs/git-interpret-trailers) are key value pairs which may be parsed by git from the end of each commit, they should be formatted as follows:

1. Of the form `<key>: <value>` (key-colon-space-value)
2. Keys must be written in kebab-case (preferably lowercase)
3. Key and value must be separated by ": " (colon-space)
4. Value can be any string, but should be considered/written as an array of space separated values
5. Each trailer occupies one line only, with a maximum length of 72 characters (i.e. no multi-line trailers allowed) 
6. Trailers must follow each other directly without empty lines between them

Additionally, [git trailers](https://git-scm.com/docs/git-interpret-trailers) follow the [RFC 822 format](http://clweb.csa.iisc.ac.in/gaurav/np/rfcs/mailmime.html) for email headers. Strictly speaking this implies the usage of "Uppercase-Kebab-Case", obviously this is not a strict requirement, and for the lightweight commit format, "lowercase-kebab-case" for trailer keys is preferred simply for aesthetic reasons.

Trailers can be used for storing values including, but not limited to some of the following examples (the entire value of the trailer key value pair is parsed by git as string, and it is up to the user to interpret these strings as required):

1. `co-authored-by: <git-user>` 
2. `closes: <issue-id>` 
3. `scope: <path/to/module>`
4. `issues: array of related issue ids`

Most [git trailers](https://git-scm.com/docs/git-interpret-trailers) are used for automation processes such as closing issues. In order to [parse git trailers](#parsing-git-trailers), the value of each git trailer should follow a known and expected format (git trailer values can be any arbitrarily formatted string, although obviously this is pointless for the purposes of automation etc.). The expected format for a given trailer value will depend on the implementation of commit parsing/automation within your repository. For example the `co-authored-by: <git-user>` may be expected to have a value formatted as and email. In any case, it is recommended that when parsing [git trailers](https://git-scm.com/docs/git-interpret-trailers), the value is interpreted as an array generated form the string value of the trailer split on single whitespace characters. In this case git trailers with array-like values are possible, and in the edge cases where a full string is required, the original string can be recovered by joining the array.

## Title Nouns

Each git commit title must begin with a three letter title noun abbreviation. This abbreviation is a noun reflecting the type/location/scope of code being affected by the commit, i.e. the *type* of the *subject* of the commit. The type of code change being made to the subject of the commit is described by the [summary verb](#summary-verbs). Please see the following table for the recommended title nouns.

| Abbreviation | Expanded          | Description                                                  |
| ------------ | ----------------- | ------------------------------------------------------------ |
| `cfg`        | config            | Changes to any configuration file                            |
| `doc`        | documents         | Changes to any documentation file, or changes which only concern code comments |
| `ext`        | external features | Changes to the external API, i.e. any changes to code which change external functionality and how the users interact with the repository |
| `int`        | internal features | Changes to the internal API, i.e. any changes to code which only affect internal functionality and other developers, and do *not* change the external API |
| `msc`        | miscellaneous     | Changes to any other part of the repository that are not covered above, for instance asset management |
| `bld`        | build             | Reserved noun for build commits, usually triggering a new release |
| `rvt`        | revert            | Reserved noun for revert commits                             |
| `mrg`        | merge             | Reserved noun for merge commits                              |

### Conventional Commit Format
The lightweight commit title noun should not be confused with the title nouns suggested by the [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0), which often indicate both the type of code being changed *and* the type of change being made (for example the `fix` (fix) noun indicates both that the commit makes changes to a part of the internal/external API *and* that the nature of the change fixes a bug). The lightweight commit format strictly separates these concerns, using the noun to reflect only the type of code being changed.

### Internal & External Changes
In some cases (for example where a performance issue, bug etc. propagates from the internal API to the external API), changes to the internal API may require updates to the patch number (or even minor change number where appropriate) of the [semver](https://semver.org/) version number of the repository/distributed code. In these cases it will be possible to see commit titles starting `int~` rather than the expected `int=` reflecting that internal changes will not normally update the version number.

### Chores
The [conventional commit format](https://www.conventionalcommits.org/en/v1.0.0) suggests only `chore` (chore) as the title noun for non code-related changes, however also suggests `docs` (documentation) for use with changes to documentation. The lightweight commit format suggests further division of non code-related changes into `doc` (documentation), `cfg` (config), and `msc` (any other miscellaneous chore such as asset management). This is due to the fact that configuration is usually an important and technical aspect of any project/repository, and changes of to the configuration should ideally be separated from other solely miscellaneous managerial tasks (i.e. separating technical config chores from chores which are less technical in nature).

### Build, Revert & Merge
Exceptions are made for the `bld`, `rvt`, and `mrg` nouns, which do not reflect the type of code being changed, but instead are reserved nouns for special types of commit which do not have exact subjects: running a build command should not change source code; changes when reverting a commit depend on the nature of the reverted commit; merge commits do not change code, only change branches in the git history. In this case the title noun is simply a contraction of the summary verb.

## Semver Flags

## Summary Verbs

## Examples

## Template

## Changelog

### Parsing Git Trailers

## Roadmap

## License

------

**DISCLAIMER** The author(s) of this repository are in no way legally qualified, and are not providing the end user(s) of this repository with *any* form of legal advice or directions.

------

Copyright (c) 2023 James Reid. All rights reserved.

This software is licensed under the terms of the MIT license, a copy which may be found in the LICENSE.md file in the root of this repository, or please refer to the text below. For a template copy of the license see one of the following 3rd party sites:

- [opensource](https://opensource.org/license/mit/)
- [choosealicense](https://choosealicense.com/licenses/mit/)
- [spdx](https://spdx.org/licenses/MIT)

#### License Text

Copyright 2023 James Reid

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the  "Software"), to deal in the Software without restriction, including  without limitation the rights to use, copy, modify, merge, publish,  distribute, sublicense, and/or sell copies of the Software, and to  permit persons to whom the Software is furnished to do so, subject to  the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.